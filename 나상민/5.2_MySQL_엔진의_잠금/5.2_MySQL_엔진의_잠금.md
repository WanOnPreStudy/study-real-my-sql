# 5.2 MySQL 엔진의 잠금

1. MySQL에서 사용되는 잠금은 크게 스토리지 엔진 레벨과 MySQL 엔진 레벨로 나눌 수 있다.
2. MySQL엔진 레벨의 잠금은 모든 스토리지 엔진에 영향을 미치지만 스토리지 엔진 레벨의 잠금은 스토리지 엔진 상호간의 영향을 미치지 않는다.

## 5.2.1 글로벌 락

1. `FLUSH TABLES WITH READ LOCK` 명령어로 획득 가능
2. MySQL에서 제공하는 잠금 중에서 가장 범위가 큼
3. 글로벌 락이 영향을 미치는 범위는 MySQL 서버 전체이며, 작업 대상 테이블이나 데이터베이스가 다르더라도 동일하게 적용
4. MySQL8.0 버전부터는 백업 락이 도입 됨. 백업 락을 획득하면 모든 세션에서 다음과 같이 테이블의 스키마나 사용자의 인증 관련 정보를 변경할 수 없음.
    1. 데이터베이스 및 테이블 등 모든 객체 생성 및 변경, 삭제
    2. REPAIR TABLE과 OPTIMIZE TABLE 명령
    3. 사용자 관리 및 비밀번호 변경

## 5.2.2 테이블 락

1. 테이블 락은 개별 테이블 단위로 설정되는 잠금이며, 명시적 또는 묵시적으로 특정 테이블의 락을 획득할 수 있다.
2. `LOCK TABLES table_name [ READ | WRITE ]` 명령으로 특정 테이블의 락을 얻을 수 있다.
3. `UNLOCK TABLES` 명령으로 잠금을 반납 할 수 있다.
4. InnoDB 테이블의 경우 레코드 기반의 잠금을 제공하기 때문에, DML 쿼리에서는 무시되고 DDL 쿼리의 경우에만 영향을 미친다.

